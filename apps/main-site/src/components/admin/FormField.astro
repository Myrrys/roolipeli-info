---
interface Props {
  label: string;
  name: string;
  type?: 'text' | 'textarea' | 'number' | 'slug';
  value?: string | number;
  error?: string;
  required?: boolean;
}

const { label, name, type = 'text', value = '', error, required = false } = Astro.props;
---

<div class="form-group">
    <label for={name}>
        {label}
        {required && <span class="required">*</span>}
    </label>

    {
        type === "textarea" ? (
            <textarea
                id={name}
                name={name}
                rows="4"
                class:list={[error ? "has-error" : ""]}
                required={required}
            >
                {value}
            </textarea>
        ) : (
            <input
                type={type === "slug" ? "text" : type}
                id={name}
                name={name}
                value={value}
                class:list={[error ? "has-error" : ""]}
                required={required}
                data-type={type}
            />
        )
    }

    {error && <span class="error-msg">{error}</span>}
</div>

<style>
    .form-group {
        display: flex;
        flex-direction: column;
        gap: var(--kide-space-2);
        margin-bottom: var(--kide-space-4);
    }

    label {
        font-weight: 600;
        color: var(--kide-ink-header);
        font-size: 0.9rem;
    }

    .required {
        color: var(--kide-danger);
    }

    input,
    textarea {
        padding: var(--kide-space-3);
        border: 1px solid var(--kide-border-strong);
        border-radius: var(--kide-radius-sm);
        font-family: inherit;
        font-size: 1rem;
        background: var(--kide-surface);
        transition:
            box-shadow 0.2s,
            border-color 0.2s;
    }

    input:focus,
    textarea:focus {
        outline: none;
        border-color: var(--kide-brand-primary);
        box-shadow: 0 0 0 3px rgba(var(--kide-brand-primary-rgb), 0.1);
    }

    .has-error {
        border-color: var(--kide-danger);
    }

    .error-msg {
        color: var(--kide-danger);
        font-size: 0.875rem;
    }
</style>
